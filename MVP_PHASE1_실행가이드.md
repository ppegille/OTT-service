# MVP Phase 1 - ì‹¤í–‰ ê°€ì´ë“œ

**ì¶•í•˜í•©ë‹ˆë‹¤!** Practice ì˜ˆì œë¥¼ ëª¨ë‘ ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤. ì´ì œ ì‹¤ì œ OTT ìŠ¤íŠ¸ë¦¬ë° ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê² ìŠµë‹ˆë‹¤.

---

## ğŸ“ ìƒì„±ëœ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ê¸°ë§í”„ë¡œì íŠ¸/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ include/
â”‚   â”‚   â””â”€â”€ server.h          âœ… ìƒì„±ë¨ - í—¤ë” íŒŒì¼
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.c            âœ… ìƒì„±ë¨ - ë©”ì¸ ì„œë²„
â”‚   â”‚   â”œâ”€â”€ http.c            âœ… ìƒì„±ë¨ - HTTP ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ streaming.c       âœ… ìƒì„±ë¨ - ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“ˆ
â”‚   â”œâ”€â”€ Makefile              âœ… ìƒì„±ë¨ - ë¹Œë“œ ì„¤ì •
â”‚   â””â”€â”€ ott_server            (ì»´íŒŒì¼ í›„ ìƒì„±ë¨)
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ player.html           âœ… ìƒì„±ë¨ - ë¹„ë””ì˜¤ í”Œë ˆì´ì–´
â”‚   â”œâ”€â”€ css/                  (ì¤€ë¹„ë¨)
â”‚   â””â”€â”€ js/                   (ì¤€ë¹„ë¨)
â”œâ”€â”€ videos/                   â³ ë¹„ë””ì˜¤ íŒŒì¼ í•„ìš”
â”œâ”€â”€ thumbnails/               (ë‚˜ì¤‘ì— ì‚¬ìš©)
â””â”€â”€ tests/                    (ë‚˜ì¤‘ì— ì‚¬ìš©)
```

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (3ë‹¨ê³„)

### 1ë‹¨ê³„: ì„œë²„ ë””ë ‰í† ë¦¬ë¡œ ì´ë™

WSL í„°ë¯¸ë„ì—ì„œ:

```bash
cd "/mnt/c/Users/dclab/Desktop/2025_2í•™ê¸°/ë„¤íŠ¸ì›Œí¬í”„ë¡œê·¸ë˜ë°/ê¸°ë§í”„ë¡œì íŠ¸/server"
```

**ê²½ë¡œê°€ ì•ˆ ë§ìœ¼ë©´**: Windows íƒìƒ‰ê¸°ì—ì„œ `server` í´ë”ë¥¼ ìš°í´ë¦­ â†’ "Open in Terminal" ë˜ëŠ” WSLì—ì„œ `pwd` ëª…ë ¹ì–´ë¡œ í˜„ì¬ ìœ„ì¹˜ í™•ì¸

### 2ë‹¨ê³„: ì„œë²„ ì»´íŒŒì¼

```bash
make
```

**ì˜ˆìƒ ì¶œë ¥:**
```
Compiling src/main.c...
Compiling src/http.c...
Compiling src/streaming.c...
Linking ott_server...
âœ“ Build complete!
Run with: ./ott_server
```

âœ… ì—ëŸ¬ ì—†ì´ ì»´íŒŒì¼ë˜ë©´ ì„±ê³µ!

### 3ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ë¹„ë””ì˜¤ ì¤€ë¹„

**ì˜µì…˜ A: ê¸°ì¡´ ë¹„ë””ì˜¤ íŒŒì¼ ë³µì‚¬**

```bash
# Practice í´ë”ì˜ test_video.mp4ë¥¼ ì‚¬ìš©
cd ../videos
cp ../../practice/test_video.mp4 .
cd ../server
```

**ì˜µì…˜ B: ìƒˆë¡œìš´ ë¹„ë””ì˜¤ ë‹¤ìš´ë¡œë“œ**

```bash
cd ../videos

# ìƒ˜í”Œ ë¹„ë””ì˜¤ ë‹¤ìš´ë¡œë“œ (ì¸í„°ë„· ì—°ê²° í•„ìš”)
curl -L "https://sample-videos.com/video123/mp4/480/big_buck_bunny_480p_1mb.mp4" -o test_video.mp4

# ë˜ëŠ” FFmpegë¡œ í…ŒìŠ¤íŠ¸ ë¹„ë””ì˜¤ ìƒì„±
ffmpeg -f lavfi -i testsrc=duration=30:size=640x480:rate=30 -pix_fmt yuv420p test_video.mp4

cd ../server
```

**ì˜µì…˜ C: ì§ì ‘ ì¤€ë¹„**

Windows íƒìƒ‰ê¸°ì—ì„œ:
1. `ê¸°ë§í”„ë¡œì íŠ¸\videos\` í´ë” ì—´ê¸°
2. ì•„ë¬´ MP4 íŒŒì¼ì„ ë³µì‚¬
3. íŒŒì¼ ì´ë¦„ì„ `test_video.mp4`ë¡œ ë³€ê²½

---

## â–¶ï¸ ì„œë²„ ì‹¤í–‰í•˜ê¸°

### ì„œë²„ ì‹œì‘

```bash
./ott_server
```

**ì˜ˆìƒ ì¶œë ¥:**
```
=== OTT Streaming Server - MVP Phase 1 ===

Step 1: Creating socket...
âœ“ Socket created successfully

Step 2: Binding to port 8080...
âœ“ Successfully bound to port 8080

Step 3: Listening for connections...
âœ“ Server is listening

ğŸš€ OTT Streaming Server is running!
   Access the player at: http://localhost:8080/
   Press Ctrl+C to stop the server

Waiting for connection...
```

âœ… ì´ í™”ë©´ì´ ë‚˜ì˜¤ë©´ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤!

---

## ğŸ¬ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ì ‘ì†

### 1. ì›¹ ë¸Œë¼ìš°ì € ì—´ê¸°

Chrome ë˜ëŠ” Edge ë¸Œë¼ìš°ì €ë¥¼ ì—½ë‹ˆë‹¤.

### 2. ì£¼ì†Œ ì…ë ¥

```
http://localhost:8080/
```

### 3. í™•ì¸ ì‚¬í•­

í”Œë ˆì´ì–´ í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´:
- âœ… ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ë³´ì„
- âœ… ì¬ìƒ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ ë³´ì„
- âœ… í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì„¹ì…˜ ë³´ì„

ì„œë²„ í„°ë¯¸ë„ì— ë‹¤ìŒê³¼ ê°™ì€ ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚¨:
```
Waiting for connection...
âœ“ Client connected: 127.0.0.1
  GET /
  â†’ 200 OK: XXXX bytes
  âœ“ Sent XXXX bytes
  Connection closed

Waiting for connection...
âœ“ Client connected: 127.0.0.1
  GET /videos/test_video.mp4
  â†’ 206 Partial Content: bytes 0-65535/XXXXXX (65536 bytes)
  âœ“ Sent 65536 bytes
  Connection closed
```

---

## âœ… í…ŒìŠ¤íŠ¸í•˜ê¸°

### í…ŒìŠ¤íŠ¸ 1: ë¹„ë””ì˜¤ ì¬ìƒ

1. í”Œë ˆì´ì–´ì—ì„œ **ì¬ìƒ ë²„íŠ¼** í´ë¦­
2. ë¹„ë””ì˜¤ê°€ ì •ìƒì ìœ¼ë¡œ ì¬ìƒë˜ëŠ”ì§€ í™•ì¸

**ì„±ê³µ ì§€í‘œ:**
- âœ… ë¹„ë””ì˜¤ ì¬ìƒë¨
- âœ… "ì¬ìƒ ì‹œì‘" ë©”ì‹œì§€ê°€ í…ŒìŠ¤íŠ¸ ê²°ê³¼ì— í‘œì‹œë¨
- âœ… ì„œë²„ í„°ë¯¸ë„ì— `206 Partial Content` ë©”ì‹œì§€ ë³´ì„

### í…ŒìŠ¤íŠ¸ 2: Seeking (íƒìƒ‰)

í”Œë ˆì´ì–´ì˜ ë²„íŠ¼ë“¤ì„ í´ë¦­:
- **"ì²˜ìŒìœ¼ë¡œ"** - ë¹„ë””ì˜¤ ì‹œì‘ ë¶€ë¶„ìœ¼ë¡œ ì´ë™
- **"ì¤‘ê°„ ì§€ì "** - ë¹„ë””ì˜¤ ì¤‘ê°„ìœ¼ë¡œ ì´ë™
- **"ë ë¶€ë¶„"** - ë¹„ë””ì˜¤ ë ë¶€ë¶„ìœ¼ë¡œ ì´ë™

**ì„±ê³µ ì§€í‘œ:**
- âœ… ê° ìœ„ì¹˜ë¡œ ì¦‰ì‹œ ì´ë™
- âœ… "Seek ì™„ë£Œ" ë©”ì‹œì§€ í‘œì‹œ
- âœ… Seek íšŸìˆ˜ ì¦ê°€

### í…ŒìŠ¤íŠ¸ 3: ì „ì²´ ìë™ í…ŒìŠ¤íŠ¸

**"ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰"** ë²„íŠ¼ í´ë¦­

**ì„±ê³µ ì§€í‘œ:**
- âœ… ì—¬ëŸ¬ ìœ„ì¹˜ë¡œ ìë™ ì´ë™
- âœ… ëª¨ë“  Seek ì‘ì—… ì„±ê³µ
- âœ… "ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ" ë©”ì‹œì§€ í‘œì‹œ

### í…ŒìŠ¤íŠ¸ 4: Browser DevTools í™•ì¸

1. **F12** í‚¤ ëˆŒëŸ¬ ê°œë°œì ë„êµ¬ ì—´ê¸°
2. **Network** íƒ­ ì„ íƒ
3. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (F5)
4. ë¹„ë””ì˜¤ ìš”ì²­ í™•ì¸

**í™•ì¸ ì‚¬í•­:**
- ì´ˆê¸° ìš”ì²­: `Status: 206 Partial Content`
- Range í—¤ë” ì¡´ì¬: `Range: bytes=0-xxxxx`
- Seek ì‹œë§ˆë‹¤ ìƒˆë¡œìš´ Range ìš”ì²­ ë°œìƒ

---

## ğŸ§ª curlë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸°

ìƒˆ WSL í„°ë¯¸ë„ ì°½ì—ì„œ:

### í…ŒìŠ¤íŠ¸ 1: í”Œë ˆì´ì–´ í˜ì´ì§€ ìš”ì²­

```bash
curl http://localhost:8080/
```

**ì˜ˆìƒ ê²°ê³¼:** HTML ì½”ë“œ ì¶œë ¥

### í…ŒìŠ¤íŠ¸ 2: ë¹„ë””ì˜¤ íŒŒì¼ ì „ì²´ ìš”ì²­

```bash
curl -I http://localhost:8080/videos/test_video.mp4
```

**ì˜ˆìƒ ì¶œë ¥:**
```
HTTP/1.1 200 OK
Content-Type: video/mp4
Content-Length: XXXXXX
Accept-Ranges: bytes
...
```

### í…ŒìŠ¤íŠ¸ 3: Range Request í…ŒìŠ¤íŠ¸

```bash
curl -v -r 0-1023 http://localhost:8080/videos/test_video.mp4 -o test_chunk.bin
```

**ì˜ˆìƒ ì¶œë ¥:**
```
< HTTP/1.1 206 Partial Content
< Content-Type: video/mp4
< Content-Length: 1024
< Content-Range: bytes 0-1023/XXXXXX
< Accept-Ranges: bytes
```

### í…ŒìŠ¤íŠ¸ 4: íŒŒì¼ í¬ê¸° í™•ì¸

```bash
ls -lh test_chunk.bin
```

**ì˜ˆìƒ ì¶œë ¥:** ì •í™•íˆ 1024 ë°”ì´íŠ¸ (1.0K)

---

## ğŸ“Š í˜„ì¬ êµ¬í˜„ëœ ê¸°ëŠ¥

### âœ… ì™„ë£Œëœ ê¸°ëŠ¥
- [x] HTTP ì„œë²„ ê¸°ë³¸ ê¸°ëŠ¥
- [x] GET ìš”ì²­ ì²˜ë¦¬
- [x] ì •ì  íŒŒì¼ ì„œë¹™ (HTML, CSS, JS)
- [x] Range Request íŒŒì‹±
- [x] 206 Partial Content ì‘ë‹µ
- [x] Content-Range í—¤ë”
- [x] ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë°
- [x] Seeking ì§€ì›
- [x] MIME type ê°ì§€
- [x] 404 ì—ëŸ¬ ì²˜ë¦¬
- [x] 416 Range Not Satisfiable ì²˜ë¦¬

### â³ ì•„ì§ êµ¬í˜„ ì•ˆ ëœ ê¸°ëŠ¥ (ë‹¤ìŒ ë‹¨ê³„)
- [ ] Fork-based ë™ì‹œ ì ‘ì† ì²˜ë¦¬ (MVP Phase 2)
- [ ] ì„¸ì…˜ ê´€ë¦¬
- [ ] ë¡œê·¸ì¸ ê¸°ëŠ¥
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
- [ ] ì‹œì²­ ê¸°ë¡ ì €ì¥
- [ ] Resume ê¸°ëŠ¥
- [ ] ì¸ë„¤ì¼ ìƒì„±

---

## ğŸ¯ ì„±ê³µ ê¸°ì¤€

ë‹¤ìŒ ëª¨ë“  í•­ëª©ì´ ì‘ë™í•˜ë©´ **MVP Phase 1 ì™„ë£Œ**:

- [x] ì„œë²„ ì»´íŒŒì¼ ì„±ê³µ
- [x] ì„œë²„ ì‹¤í–‰ ì„±ê³µ
- [x] ë¸Œë¼ìš°ì €ì—ì„œ í”Œë ˆì´ì–´ ì ‘ì†
- [x] ë¹„ë””ì˜¤ ì¬ìƒ
- [x] Seeking ì‘ë™ (ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ì´ë™)
- [x] ì„œë²„ í„°ë¯¸ë„ì— 206 ì‘ë‹µ ë³´ì„
- [x] curlë¡œ Range Request í™•ì¸

**ëª¨ë‘ ì²´í¬ë˜ì—ˆë‚˜ìš”?** ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "Permission denied" ì»´íŒŒì¼ ì˜¤ë¥˜

```bash
chmod +x src/*.c
make clean
make
```

### ë¬¸ì œ 2: "Cannot open player.html" 404 ì˜¤ë¥˜

```bash
# íŒŒì¼ ì¡´ì¬ í™•ì¸
ls -la ../client/player.html

# ì—†ìœ¼ë©´ ë‹¤ì‹œ ìƒì„± í•„ìš” (ë‚˜ì—ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”)
```

### ë¬¸ì œ 3: "Cannot open test_video.mp4"

```bash
# ë¹„ë””ì˜¤ íŒŒì¼ í™•ì¸
ls -la ../videos/

# ì—†ìœ¼ë©´ ë¹„ë””ì˜¤ íŒŒì¼ ì¶”ê°€ í•„ìš”
```

### ë¬¸ì œ 4: "Address already in use"

```bash
# ê¸°ì¡´ ì„œë²„ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
pkill ott_server

# ë˜ëŠ” ìˆ˜ë™ìœ¼ë¡œ í¬íŠ¸ í™•ì¸ í›„ ì¢…ë£Œ
lsof -ti:8080 | xargs kill -9
```

### ë¬¸ì œ 5: ë¹„ë””ì˜¤ê°€ ì¬ìƒ ì•ˆ ë¨

1. **ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸** (F12 â†’ Console íƒ­)
2. **ë¹„ë””ì˜¤ íŒŒì¼ í˜•ì‹ í™•ì¸** (MP4ë§Œ ì§€ì›)
3. **ì„œë²„ í„°ë¯¸ë„ í™•ì¸** (ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸)

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„: MVP Phase 2

MVP Phase 1ì´ ì™„ë£Œë˜ë©´:

1. **Fork-based ë™ì‹œ ì ‘ì† ì²˜ë¦¬** êµ¬í˜„
2. **ì—¬ëŸ¬ ì‚¬ìš©ì ë™ì‹œ ìŠ¤íŠ¸ë¦¬ë°** í…ŒìŠ¤íŠ¸
3. **ê¸°ë³¸ ì„¸ì…˜ ê´€ë¦¬** ì¶”ê°€

**ì¤€ë¹„ë˜ì…¨ë‚˜ìš”?** "MVP Phase 2 ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤" ë¼ê³  ë§ì”€í•´ì£¼ì„¸ìš”!

---

## ğŸ’¡ ìœ ìš©í•œ ëª…ë ¹ì–´

```bash
# ì„œë²„ ë¹Œë“œ
make

# ì„œë²„ ì‹¤í–‰
make run

# ë¹Œë“œ íŒŒì¼ ì •ë¦¬
make clean

# ì„œë²„ ì¤‘ì§€ (ì‹¤í–‰ ì¤‘ì¸ í„°ë¯¸ë„ì—ì„œ)
Ctrl + C

# ì„œë²„ ë¡œê·¸ ë³´ë©° ì‹¤í–‰ (ë³„ë„ í„°ë¯¸ë„)
tail -f server.log  # (ë¡œê·¸ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ)
```

---

**ì¶•í•˜í•©ë‹ˆë‹¤!** ğŸ‰

ì²« ë²ˆì§¸ OTT ìŠ¤íŠ¸ë¦¬ë° ì„œë²„ MVPë¥¼ ì™„ì„±í•˜ì…¨ìŠµë‹ˆë‹¤!

ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ë¬¼ì–´ë³´ì„¸ìš”!
